<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>A Secret Message For You</title>

    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <style>
        /* --- General Styles --- */
        @keyframes fade-in {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in {
            animation: fade-in 1.5s ease-out forwards;
        }

        @keyframes heart-beat {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.1);
            }
        }

        .heart-beat {
            animation: heart-beat 1.5s infinite;
        }

        @keyframes collected-heart {
            0% {
                transform: scale(1);
                opacity: 1;
            }

            100% {
                transform: scale(1.5) translateY(-50px);
                opacity: 0;
            }
        }

        .collected-heart {
            animation: collected-heart 0.5s ease-out forwards;
        }

        /* --- Envelope Animation --- */
        @keyframes fly-envelope {
            0% {
                transform: translate(0, 0) rotate(0deg);
                opacity: 1;
            }

            50% {
                transform: translate(100px, -150px) rotate(15deg);
            }

            100% {
                transform: translate(200px, -300px) rotate(25deg);
                opacity: 0;
            }
        }

        .animate-fly-envelope {
            animation: fly-envelope 4s ease-in-out forwards;
        }

        /* --- CSS for the INTRO FLOWER ANIMATION (UNCHANGED) --- */
        *,
        *::after,
        *::before {
            padding: 0;
            margin: 0;
            box-sizing: border-box;
        }

        :root {
            --dark-color: #000;
        }

        body.flower-animation-body {
            display: flex;
            align-items: flex-end;
            justify-content: center;
            min-height: 100vh;
            background-color: var(--dark-color);
            overflow: hidden;
            perspective: 1000px;
        }

        .night {
            position: fixed;
            left: 50%;
            top: 0;
            transform: translateX(-50%);
            width: 100%;
            height: 100%;
            filter: blur(0.1vmin);
            background-image: radial-gradient(ellipse at top, transparent 0%, var(--dark-color)), radial-gradient(ellipse at bottom, var(--dark-color), rgba(145, 233, 255, 0.2)), repeating-linear-gradient(220deg, black 0px, black 19px, transparent 19px, transparent 22px), repeating-linear-gradient(189deg, black 0px, black 19px, transparent 19px, transparent 22px), repeating-linear-gradient(148deg, black 0px, black 19px, transparent 19px, transparent 22px), linear-gradient(90deg, #00fffa, #f0f0f0);
        }

        .flowers {
            position: relative;
            transform: scale(0.9);
        }

        .flower {
            position: absolute;
            bottom: 10vmin;
            transform-origin: bottom center;
            z-index: 10;
            --fl-speed: 0.8s;
        }

        .flower--1 {
            animation: moving-flower-1 4s linear infinite;
        }

        .flower--1 .flower__line {
            height: 70vmin;
            animation-delay: 0.3s;
        }

        .flower--1 .flower__line__leaf--1 {
            animation: blooming-leaf-right var(--fl-speed) 1.6s backwards;
        }

        .flower--1 .flower__line__leaf--2 {
            animation: blooming-leaf-right var(--fl-speed) 1.4s backwards;
        }

        .flower--1 .flower__line__leaf--3 {
            animation: blooming-leaf-left var(--fl-speed) 1.2s backwards;
        }

        .flower--1 .flower__line__leaf--4 {
            animation: blooming-leaf-left var(--fl-speed) 1s backwards;
        }

        .flower--1 .flower__line__leaf--5 {
            animation: blooming-leaf-right var(--fl-speed) 1.8s backwards;
        }

        .flower--1 .flower__line__leaf--6 {
            animation: blooming-leaf-left var(--fl-speed) 2s backwards;
        }

        .flower--2 {
            left: 50%;
            transform: rotate(20deg);
            animation: moving-flower-2 4s linear infinite;
        }

        .flower--2 .flower__line {
            height: 60vmin;
            animation-delay: 0.6s;
        }

        .flower--2 .flower__line__leaf--1 {
            animation: blooming-leaf-right var(--fl-speed) 1.9s backwards;
        }

        .flower--2 .flower__line__leaf--2 {
            animation: blooming-leaf-right var(--fl-speed) 1.7s backwards;
        }

        .flower--2 .flower__line__leaf--3 {
            animation: blooming-leaf-left var(--fl-speed) 1.5s backwards;
        }

        .flower--2 .flower__line__leaf--4 {
            animation: blooming-leaf-left var(--fl-speed) 1.3s backwards;
        }

        .flower--3 {
            left: 50%;
            transform: rotate(-15deg);
            animation: moving-flower-3 4s linear infinite;
        }

        .flower--3 .flower__line {
            animation-delay: 0.9s;
        }

        .flower--3 .flower__line__leaf--1 {
            animation: blooming-leaf-right var(--fl-speed) 2.5s backwards;
        }

        .flower--3 .flower__line__leaf--2 {
            animation: blooming-leaf-right var(--fl-speed) 2.3s backwards;
        }

        .flower--3 .flower__line__leaf--3 {
            animation: blooming-leaf-left var(--fl-speed) 2.1s backwards;
        }

        .flower--3 .flower__line__leaf--4 {
            animation: blooming-leaf-left var(--fl-speed) 1.9s backwards;
        }

        .flower__leafs {
            position: relative;
            animation: blooming-flower 2s backwards;
        }

        .flower__leafs--1 {
            animation-delay: 1.1s;
        }

        .flower__leafs--2 {
            animation-delay: 1.4s;
        }

        .flower__leafs--3 {
            animation-delay: 1.7s;
        }

        .flower__leafs::after {
            content: "";
            position: absolute;
            left: 0;
            top: 0;
            transform: translate(-50%, -100%);
            width: 8vmin;
            height: 8vmin;
            background-color: #6bf0ff;
            filter: blur(10vmin);
        }

        .flower__leaf {
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 8vmin;
            height: 11vmin;
            border-radius: 51% 49% 47% 53%/44% 45% 55% 69%;
            background-color: #a7ffee;
            background-image: linear-gradient(to top, #54b8aa, #a7ffee);
            transform-origin: bottom center;
            opacity: 0.9;
            box-shadow: inset 0 0 2vmin rgba(255, 255, 255, 0.5);
        }

        .flower__leaf--1 {
            transform: translate(-10%, 1%) rotateY(40deg) rotateX(-50deg);
        }

        .flower__leaf--2 {
            transform: translate(-50%, -4%) rotateX(40deg);
        }

        .flower__leaf--3 {
            transform: translate(-90%, 0%) rotateY(45deg) rotateX(50deg);
        }

        .flower__leaf--4 {
            width: 8vmin;
            height: 8vmin;
            transform-origin: bottom left;
            border-radius: 4vmin 10vmin 4vmin 4vmin;
            transform: translate(0%, 18%) rotateX(70deg) rotate(-43deg);
            background-image: linear-gradient(to top, #39c6d6, #a7ffee);
            z-index: 1;
            opacity: 0.8;
        }

        .flower__white-circle {
            position: absolute;
            left: -3.5vmin;
            top: -3vmin;
            width: 9vmin;
            height: 4vmin;
            border-radius: 50%;
            background-color: #fff;
        }

        .flower__white-circle::after {
            content: "";
            position: absolute;
            left: 50%;
            top: 45%;
            transform: translate(-50%, -50%);
            width: 60%;
            height: 60%;
            border-radius: inherit;
            background-image: repeating-linear-gradient(135deg, rgba(0, 0, 0, 0.03) 0px, rgba(0, 0, 0, 0.03) 1px, transparent 1px, transparent 12px), repeating-linear-gradient(45deg, rgba(0, 0, 0, 0.03) 0px, rgba(0, 0, 0, 0.03) 1px, transparent 1px, transparent 12px), repeating-linear-gradient(67.5deg, rgba(0, 0, 0, 0.03) 0px, rgba(0, 0, 0, 0.03) 1px, transparent 1px, transparent 12px), repeating-linear-gradient(135deg, rgba(0, 0, 0, 0.03) 0px, rgba(0, 0, 0, 0.03) 1px, transparent 1px, transparent 12px), repeating-linear-gradient(45deg, rgba(0, 0, 0, 0.03) 0px, rgba(0, 0, 0, 0.03) 1px, transparent 1px, transparent 12px), repeating-linear-gradient(112.5deg, rgba(0, 0, 0, 0.03) 0px, rgba(0, 0, 0, 0.03) 1px, transparent 1px, transparent 12px), repeating-linear-gradient(112.5deg, rgba(0, 0, 0, 0.03) 0px, rgba(0, 0, 0, 0.03) 1px, transparent 1px, transparent 12px), repeating-linear-gradient(45deg, rgba(0, 0, 0, 0.03) 0px, rgba(0, 0, 0, 0.03) 1px, transparent 1px, transparent 12px), repeating-linear-gradient(22.5deg, rgba(0, 0, 0, 0.03) 0px, rgba(0, 0, 0, 0.03) 1px, transparent 1px, transparent 12px), repeating-linear-gradient(45deg, rgba(0, 0, 0, 0.03) 0px, rgba(0, 0, 0, 0.03) 1px, transparent 1px, transparent 12px), repeating-linear-gradient(22.5deg, rgba(0, 0, 0, 0.03) 0px, rgba(0, 0, 0, 0.03) 1px, transparent 1px, transparent 12px), repeating-linear-gradient(135deg, rgba(0, 0, 0, 0.03) 0px, rgba(0, 0, 0, 0.03) 1px, transparent 1px, transparent 12px), repeating-linear-gradient(157.5deg, rgba(0, 0, 0, 0.03) 0px, rgba(0, 0, 0, 0.03) 1px, transparent 1px, transparent 12px), repeating-linear-gradient(67.5deg, rgba(0, 0, 0, 0.03) 0px, rgba(0, 0, 0, 0.03) 1px, transparent 1px, transparent 12px), repeating-linear-gradient(67.5deg, rgba(0, 0, 0, 0.03) 0px, rgba(0, 0, 0, 0.03) 1px, transparent 1px, transparent 12px), linear-gradient(90deg, #ffeb12, #ffce00);
        }

        .flower__line {
            height: 55vmin;
            width: 1.5vmin;
            background-image: linear-gradient(to left, rgba(0, 0, 0, 0.2), transparent, rgba(255, 255, 255, 0.2)), linear-gradient(to top, transparent 10%, #14757a, #39c6d6);
            box-shadow: inset 0 0 2px rgba(0, 0, 0, 0.5);
            animation: grow-flower-tree 4s backwards;
        }

        .flower__line__leaf {
            --w: 7vmin;
            --h: calc(var(--w) + 2vmin);
            position: absolute;
            top: 20%;
            left: 90%;
            width: var(--w);
            height: var(--h);
            border-top-right-radius: var(--h);
            border-bottom-left-radius: var(--h);
            background-image: linear-gradient(to top, rgba(20, 117, 122, 0.4), #39c6d6);
        }

        .flower__line__leaf--1 {
            transform: rotate(70deg) rotateY(30deg);
        }

        .flower__line__leaf--2 {
            top: 45%;
            transform: rotate(70deg) rotateY(30deg);
        }

        .flower__line__leaf--3,
        .flower__line__leaf--4,
        .flower__line__leaf--6 {
            border-top-right-radius: 0;
            border-bottom-left-radius: 0;
            border-top-left-radius: var(--h);
            border-bottom-right-radius: var(--h);
            left: -460%;
            top: 12%;
            transform: rotate(-70deg) rotateY(30deg);
        }

        .flower__line__leaf--4 {
            top: 40%;
        }

        .flower__line__leaf--5 {
            top: 0;
            transform-origin: left;
            transform: rotate(70deg) rotateY(30deg) scale(0.6);
        }

        .flower__line__leaf--6 {
            top: -2%;
            left: -450%;
            transform-origin: right;
            transform: rotate(-70deg) rotateY(30deg) scale(0.6);
        }

        .flower__light {
            position: absolute;
            bottom: 0vmin;
            width: 1vmin;
            height: 1vmin;
            background-color: #fffb00;
            border-radius: 50%;
            filter: blur(0.2vmin);
            animation: light-ans 4s linear infinite backwards;
        }

        .flower__light:nth-child(odd) {
            background-color: #23f0ff;
        }

        .flower__light--1 {
            left: -2vmin;
            animation-delay: 1s;
        }

        .flower__light--2 {
            left: 3vmin;
            animation-delay: 0.5s;
        }

        .flower__light--3 {
            left: -6vmin;
            animation-delay: 0.3s;
        }

        .flower__light--4 {
            left: 6vmin;
            animation-delay: 0.9s;
        }

        .flower__light--5 {
            left: -1vmin;
            animation-delay: 1.5s;
        }

        .flower__light--6 {
            left: -4vmin;
            animation-delay: 3s;
        }

        .flower__light--7 {
            left: 3vmin;
            animation-delay: 2s;
        }

        .flower__light--8 {
            left: -6vmin;
            animation-delay: 3.5s;
        }

        .flower__grass {
            --c: #159faa;
            --line-w: 1.5vmin;
            position: absolute;
            bottom: 12vmin;
            left: -7vmin;
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            z-index: 20;
            transform-origin: bottom center;
            transform: rotate(-48deg) rotateY(40deg);
        }

        .flower__grass--1 {
            animation: moving-grass 2s linear infinite;
        }

        .flower__grass--2 {
            left: 2vmin;
            bottom: 10vmin;
            transform: scale(0.5) rotate(75deg) rotateX(10deg) rotateY(-200deg);
            opacity: 0.8;
            z-index: 0;
            animation: moving-grass--2 1.5s linear infinite;
        }

        .flower__grass--top {
            width: 7vmin;
            height: 10vmin;
            border-top-right-radius: 100%;
            border-right: var(--line-w) solid var(--c);
            transform-origin: bottom center;
            transform: rotate(-2deg);
        }

        .flower__grass--bottom {
            margin-top: -2px;
            width: var(--line-w);
            height: 25vmin;
            background-image: linear-gradient(to top, transparent, var(--c));
        }

        .flower__grass__leaf {
            --size: 10vmin;
            position: absolute;
            width: calc(var(--size) * 2.1);
            height: var(--size);
            border-top-left-radius: var(--size);
            border-top-right-radius: var(--size);
            background-image: linear-gradient(to top, transparent, transparent 30%, var(--c));
            z-index: 100;
        }

        .flower__grass__leaf--1 {
            top: -6%;
            left: 30%;
            --size: 6vmin;
            transform: rotate(-20deg);
            animation: growing-grass-ans--1 2s 2.6s backwards;
        }

        .flower__grass__leaf--2 {
            top: -5%;
            left: -110%;
            --size: 6vmin;
            transform: rotate(10deg);
            animation: growing-grass-ans--2 2s 2.4s linear backwards;
        }

        .flower__grass__leaf--3 {
            top: 5%;
            left: 60%;
            --size: 8vmin;
            transform: rotate(-18deg) rotateX(-20deg);
            animation: growing-grass-ans--3 2s 2.2s linear backwards;
        }

        .flower__grass__leaf--4 {
            top: 6%;
            left: -135%;
            --size: 8vmin;
            transform: rotate(2deg);
            animation: growing-grass-ans--4 2s 2s linear backwards;
        }

        .flower__grass__leaf--5 {
            top: 20%;
            left: 60%;
            --size: 10vmin;
            transform: rotate(-24deg) rotateX(-20deg);
            animation: growing-grass-ans--5 2s 1.8s linear backwards;
        }

        .flower__grass__leaf--6 {
            top: 22%;
            left: -180%;
            --size: 10vmin;
            transform: rotate(10deg);
            animation: growing-grass-ans--6 2s 1.6s linear backwards;
        }

        .flower__grass__leaf--7 {
            top: 39%;
            left: 70%;
            --size: 10vmin;
            transform: rotate(-10deg);
            animation: growing-grass-ans--7 2s 1.4s linear backwards;
        }

        .flower__grass__leaf--8 {
            top: 40%;
            left: -215%;
            --size: 11vmin;
            transform: rotate(10deg);
            animation: growing-grass-ans--8 2s 1.2s linear backwards;
        }

        .flower__grass__overlay {
            position: absolute;
            top: -10%;
            right: 0%;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            filter: blur(1.5vmin);
            z-index: 100;
        }

        .flower__g-long {
            --w: 2vmin;
            --h: 6vmin;
            --c: #159faa;
            position: absolute;
            bottom: 10vmin;
            left: -3vmin;
            transform-origin: bottom center;
            transform: rotate(-30deg) rotateY(-20deg);
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            animation: flower-g-long-ans 3s linear infinite;
        }

        .flower__g-long__top {
            top: calc(var(--h) * -1);
            width: calc(var(--w) + 1vmin);
            height: var(--h);
            border-top-right-radius: 100%;
            border-right: 0.7vmin solid var(--c);
            transform: translate(-0.7vmin, 1vmin);
        }

        .flower__g-long__bottom {
            width: var(--w);
            height: 50vmin;
            transform-origin: bottom center;
            background-image: linear-gradient(to top, transparent 30%, var(--c));
            box-shadow: inset 0 0 2px rgba(0, 0, 0, 0.5);
            clip-path: polygon(35% 0, 65% 1%, 100% 100%, 0% 100%);
        }

        .flower__g-right {
            position: absolute;
            bottom: 6vmin;
            left: -2vmin;
            transform-origin: bottom left;
            transform: rotate(20deg);
        }

        .flower__g-right .flower__g-long__bottom {
            height: 35vmin;
        }

        .flower__g-right .flower__g-long__top {
            transform: translate(-0.7vmin, 1vmin) rotateY(180deg);
        }

        .growing-circle {
            position: absolute;
            display: grid;
            place-items: center;
            width: 12vmin;
            height: 12vmin;
        }

        .growing-circle__version--1,
        .growing-circle__version--2,
        .growing-circle__version--3 {
            position: absolute;
            width: 100%;
            height: 100%;
            border: 0.8vmin solid #14757a;
            border-radius: 50%;
            border-color: #14757a transparent;
            opacity: 0;
        }

        .growing-circle__version--1 {
            animation: growing-circle-ans 2s 0.2s backwards;
        }

        .growing-circle__version--2 {
            transform: rotate(45deg);
            animation: growing-circle-ans 2s 0.4s backwards;
        }

        .growing-circle__version--3 {
            transform: rotate(90deg);
            animation: growing-circle-ans 2s 0.6s backwards;
        }

        .growing-circle__version--4 {
            position: absolute;
            width: 80%;
            height: 80%;
            border: 0.8vmin solid #14757a;
            border-radius: 50%;
            opacity: 0;
            animation: growing-circle-ans--2 2s 0.8s backwards;
        }

        @keyframes blooming-leaf-right {
            0% {
                transform: rotate(70deg) rotateY(30deg) scale(0);
            }
        }

        @keyframes blooming-leaf-left {
            0% {
                transform: rotate(-70deg) rotateY(30deg) scale(0);
            }
        }

        @keyframes grow-flower-tree {
            0% {
                height: 0;
                border-radius: 1vmin;
            }
        }

        @keyframes blooming-flower {
            0% {
                transform: scale(0);
            }
        }

        @keyframes moving-flower-1 {
            50% {
                transform: translateY(-3vmin) rotate(2deg);
            }
        }

        @keyframes moving-flower-2 {
            50% {
                transform: translateY(-3vmin) rotate(-2deg);
            }
        }

        @keyframes moving-flower-3 {
            50% {
                transform: translateY(-3vmin) rotate(2deg);
            }
        }

        @keyframes moving-grass {
            50% {
                transform: translateY(-1vmin) rotate(-48deg) rotateY(40deg);
            }
        }

        @keyframes moving-grass--2 {
            50% {
                transform: translateY(-1vmin) scale(0.5) rotate(75deg) rotateX(10deg) rotateY(-200deg);
            }
        }

        @keyframes light-ans {

            0%,
            20% {
                opacity: 0;
            }

            21%,
            80% {
                opacity: 1;
            }

            100% {
                opacity: 0;
                transform: translateY(-300%) scale(2.5);
            }
        }

        @keyframes growing-grass-ans--1 {
            0% {
                transform-origin: bottom right;
                transform: rotate(-20deg) scale(0);
            }
        }

        @keyframes growing-grass-ans--2 {
            0% {
                transform-origin: bottom left;
                transform: rotate(10deg) scale(0);
            }
        }

        @keyframes growing-grass-ans--3 {
            0% {
                transform-origin: bottom right;
                transform: rotate(-18deg) rotateX(-20deg) scale(0);
            }
        }

        @keyframes growing-grass-ans--4 {
            0% {
                transform-origin: bottom left;
                transform: rotate(2deg) scale(0);
            }
        }

        @keyframes growing-grass-ans--5 {
            0% {
                transform-origin: bottom right;
                transform: rotate(-24deg) rotateX(-20deg) scale(0);
            }
        }

        @keyframes growing-grass-ans--6 {
            0% {
                transform-origin: bottom left;
                transform: rotate(10deg) scale(0);
            }
        }

        @keyframes growing-grass-ans--7 {
            0% {
                transform-origin: bottom right;
                transform: rotate(-10deg) scale(0);
            }
        }

        @keyframes growing-grass-ans--8 {
            0% {
                transform-origin: bottom left;
                transform: rotate(10deg) scale(0);
            }
        }

        @keyframes flower-g-long-ans {
            50% {
                transform: translateY(-1.5vmin) rotate(-30deg) rotateY(-20deg);
            }
        }

        @keyframes growing-circle-ans {
            0% {
                transform: scale(0);
                opacity: 1;
            }

            80% {
                opacity: 1;
            }

            100% {
                transform: scale(1.4);
                opacity: 0;
            }
        }

        @keyframes growing-circle-ans--2 {
            0% {
                transform: scale(0);
                opacity: 1;
            }

            60% {
                opacity: 1;
            }

            100% {
                transform: scale(1.2);
                opacity: 0;
            }
        }

        /* --- End of Flower Animation CSS --- */
    </style>
</head>

<body class="antialiased">
    <div id="root"></div>

    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
<script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- Passcode Page with new Peach/Nude Theme ---
        const PasscodePage = ({ onSuccess }) => {
            const [passcode, setPasscode] = useState('');
            const [error, setError] = useState(false);
            const inputRef = useRef(null);

            const handleLogin = (e) => {
                e.preventDefault();
                if (passcode === '2405') {
                    onSuccess();
                } else {
                    setError(true);
                    setPasscode('');
                }
            };

            useEffect(() => {
                inputRef.current.focus();
            }, []);

            // Peach/Nude color palette:
            // Background: #F7D6CF
            // Text/Headings: #44291A
            // Button: #A15C48
            // Button Text: #F7D6CF
            return (
                <div style={{ backgroundColor: '#F7D6CF', color: '#44291A' }} className="flex flex-col items-center justify-center min-h-screen p-4 fade-in">
                    <div className="w-full max-w-sm text-center">
                        <i className="fas fa-lock text-5xl mb-4"></i>
                        <h1 className="text-3xl font-bold mb-2">A Secret Property</h1>
                        <p className="mb-6">This is for my wife's eyes only. Please enter the passcode.</p>

                        <form onSubmit={handleLogin} className="space-y-4">
                            <input
                                ref={inputRef}
                                type="password"
                                value={passcode}
                                onChange={(e) => {
                                    setPasscode(e.target.value);
                                    setError(false); // Reset error on new input
                                }}
                                placeholder="****"
                                style={{
                                    backgroundColor: 'rgba(255, 255, 255, 0.5)',
                                    borderColor: '#A15C48',
                                    color: '#44291A'
                                }}
                                className="w-full px-4 py-3 text-center text-lg rounded-lg border-2 focus:ring-2 focus:ring-offset-2 focus:ring-offset-[#F7D6CF] focus:ring-[#A15C48] focus:outline-none transition"
                            />
                            <button
                                type="submit"
                                style={{ backgroundColor: '#A15C48', color: '#F7D6CF' }}
                                className="w-full py-3 text-lg font-bold rounded-lg shadow-md hover:opacity-90 transform hover:scale-105 transition-transform duration-300"
                            >
                                Unlock
                            </button>
                        </form>

                        {error && (
                            <p style={{ color: '#44291A' }} className="mt-4 font-semibold animate-pulse">
                                Incorrect Passcode. Our special date, perhaps?
                            </p>
                        )}
                    </div>
                </div>
            );
        };

        // --- Flower Animation Page (UNCHANGED) ---
        const FlowerAnimationPage = ({ onAnimationEnd }) => {
            useEffect(() => {
                document.body.classList.add('flower-animation-body');
                const timer = setTimeout(onAnimationEnd, 7000); // Duration of animation
                return () => {
                    document.body.classList.remove('flower-animation-body');
                    clearTimeout(timer);
                };
            }, [onAnimationEnd]);

            return (
                <div>
                    <div className="night"></div>
                    <div className="flowers">
                        <div className="flower flower--1">
                            <div className="flower__leafs flower__leafs--1">
                                <div className="flower__leaf flower__leaf--1"></div>
                                <div className="flower__leaf flower__leaf--2"></div>
                                <div className="flower__leaf flower__leaf--3"></div>
                                <div className="flower__leaf flower__leaf--4"></div>
                                <div className="flower__white-circle"></div>
                                <div className="flower__light flower__light--1"></div>
                                <div className="flower__light flower__light--2"></div>
                                <div className="flower__light flower__light--3"></div>
                                <div className="flower__light flower__light--4"></div>
                                <div className="flower__light flower__light--5"></div>
                                <div className="flower__light flower__light--6"></div>
                                <div className="flower__light flower__light--7"></div>
                                <div className="flower__light flower__light--8"></div>
                            </div>
                            <div className="flower__line">
                                <div className="flower__line__leaf flower__line__leaf--1"></div>
                                <div className="flower__line__leaf flower__line__leaf--2"></div>
                                <div className="flower__line__leaf flower__line__leaf--3"></div>
                                <div className="flower__line__leaf flower__line__leaf--4"></div>
                                <div className="flower__line__leaf flower__line__leaf--5"></div>
                                <div className="flower__line__leaf flower__line__leaf--6"></div>
                            </div>
                        </div>
                        {/* Other flowers... */}
                        <div className="flower flower--2">
                            <div className="flower__leafs flower__leafs--2">
                                <div className="flower__leaf flower__leaf--1"></div>
                                <div className="flower__leaf flower__leaf--2"></div>
                                <div className="flower__leaf flower__leaf--3"></div>
                                <div className="flower__leaf flower__leaf--4"></div>
                                <div className="flower__white-circle"></div>
                            </div>
                            <div className="flower__line">
                                <div className="flower__line__leaf flower__line__leaf--1"></div>
                                <div className="flower__line__leaf flower__line__leaf--2"></div>
                                <div className="flower__line__leaf flower__line__leaf--3"></div>
                                <div className="flower__line__leaf flower__line__leaf--4"></div>
                            </div>
                        </div>
                        <div className="flower flower--3">
                            <div className="flower__leafs flower__leafs--3">
                                <div className="flower__leaf flower__leaf--1"></div>
                                <div className="flower__leaf flower__leaf--2"></div>
                                <div className="flower__leaf flower__leaf--3"></div>
                                <div className="flower__leaf flower__leaf--4"></div>
                                <div className="flower__white-circle"></div>
                            </div>
                            <div className="flower__line">
                                <div className="flower__line__leaf flower__line__leaf--1"></div>
                                <div className="flower__line__leaf flower__line__leaf--2"></div>
                                <div className="flower__line__leaf flower__line__leaf--3"></div>
                                <div className="flower__line__leaf flower__line__leaf--4"></div>
                            </div>
                        </div>
                        <div className="growing-circle">
                            <div className="growing-circle__version--1"></div>
                            <div className="growing-circle__version--2"></div>
                            <div className="growing-circle__version--3"></div>
                            <div className="growing-circle__version--4"></div>
                        </div>
                    </div>
                </div>
            );
        };

        // --- Realistic Moon Component (FIXED) ---
        const Moon = () => {
            const mountRef = useRef(null);

            useEffect(() => {
                // Store the current ref value in a variable to use in the cleanup function
                const mountNode = mountRef.current;
                if (!mountNode) {
                    return; // If the mount point doesn't exist, do nothing.
                }

                const w = mountNode.clientWidth;
                const h = 300; // Fixed height for the canvas
                const scene = new THREE.Scene();
                const camera = new THREE.PerspectiveCamera(75, w / h, 0.1, 1000);
                camera.position.z = 5;

                const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
                renderer.setSize(w, h);
                mountNode.appendChild(renderer.domElement);

                // Create a canvas texture for the moon surface
                const canvas = document.createElement('canvas');
                canvas.width = 1024;
                canvas.height = 512;
                const context = canvas.getContext('2d');

                // Base moon color
                context.fillStyle = '#dddddd';
                context.fillRect(0, 0, canvas.width, canvas.height);

                // Add craters
                for (let i = 0; i < 300; i++) {
                    const x = Math.random() * canvas.width;
                    const y = Math.random() * canvas.height;
                    const r = Math.random() * 30 + 5;
                    const opacity = Math.random() * 0.4 + 0.2;
                    context.beginPath();
                    context.arc(x, y, r, 0, 2 * Math.PI, false);
                    context.fillStyle = `rgba(0,0,0,${opacity})`;
                    context.fill();
                }

                const texture = new THREE.CanvasTexture(canvas);
                const geometry = new THREE.SphereGeometry(2, 64, 64);
                const material = new THREE.MeshStandardMaterial({
                    map: texture,
                    metalness: 0.1,
                    roughness: 0.8
                });
                const moon = new THREE.Mesh(geometry, material);
                scene.add(moon);

                // Lighting
                const ambientLight = new THREE.AmbientLight(0xffffff, 0.2);
                scene.add(ambientLight);
                const pointLight = new THREE.PointLight(0xffffff, 1.5);
                pointLight.position.set(5, 3, 5);
                scene.add(pointLight);

                // Handle mouse interaction for rotation
                let isMouseDown = false;
                let previousMousePosition = { x: 0, y: 0 };

                const onMouseDown = (e) => { isMouseDown = true; };
                const onMouseUp = (e) => { isMouseDown = false; };
                const onMouseMove = (e) => {
                    if (!isMouseDown) return;
                    const deltaMove = {
                        x: e.offsetX - previousMousePosition.x,
                        y: e.offsetY - previousMousePosition.y
                    };

                    moon.rotation.y += deltaMove.x * 0.005;
                    moon.rotation.x += deltaMove.y * 0.005;

                    previousMousePosition = { x: e.offsetX, y: e.offsetY };
                };

                renderer.domElement.addEventListener('mousedown', onMouseDown);
                renderer.domElement.addEventListener('mouseup', onMouseUp);
                renderer.domElement.addEventListener('mousemove', onMouseMove);

                // Animation loop
                let animationFrameId;
                const animate = () => {
                    animationFrameId = requestAnimationFrame(animate);
                    if (!isMouseDown) {
                        moon.rotation.y += 0.0005; // slow auto-rotation
                    }
                    renderer.render(scene, camera);
                };
                animate();

                // Handle resize
                const handleResize = () => {
                    if (mountNode) {
                        const newW = mountNode.clientWidth;
                        renderer.setSize(newW, h);
                        camera.aspect = newW / h;
                        camera.updateProjectionMatrix();
                    }
                };
                window.addEventListener('resize', handleResize);

                // Cleanup function
                return () => {
                    cancelAnimationFrame(animationFrameId);
                    window.removeEventListener('resize', handleResize);
                    renderer.domElement.removeEventListener('mousedown', onMouseDown);
                    renderer.domElement.removeEventListener('mouseup', onMouseUp);
                    renderer.domElement.removeEventListener('mousemove', onMouseMove);

                    // Check if the renderer's element is still a child before removing
                    if (mountNode && renderer.domElement.parentNode === mountNode) {
                        mountNode.removeChild(renderer.domElement);
                    }

                    // Dispose of Three.js objects to prevent memory leaks
                    geometry.dispose();
                    material.dispose();
                    texture.dispose();
                    renderer.dispose();
                };
            }, []);

            return <div ref={mountRef} className="w-full h-[300px] cursor-grab active:cursor-grabbing"></div>;
        };

        // --- Main Content Page with new Ruby Pink Theme ---
        const MainContentPage = () => {
            const [activeSection, setActiveSection] = useState('affirmation');
            const [collectedHearts, setCollectedHearts] = useState([]);
            const [messageIndex, setMessageIndex] = useState(0);
            const [showPlanForm, setShowPlanForm] = useState(false);
            const [proposedDate, setProposedDate] = useState('');
            const [proposedIdea, setProposedIdea] = useState('');
            const [dateSubmitted, setDateSubmitted] = useState(false);

            useEffect(() => {
                emailjs.init("QoCQbg9gv8bU5rOfy"); // your actual User ID
            }, []);

            const affirmations = [
                "You are my greatest adventure, my dearest love. Every day with you is a gift.",
                "Your strength and kindness inspire me always. I am so proud to call you my wife.",
                "In your eyes, I found my home. In your heart, I found my peace.",
                "You are the most beautiful person, inside and out. My love for you grows endlessly.",
                "Thank you for your unwavering love and for making every moment brighter.",
                "Whenever I picture myself happy, its always with you",
                "The distance doesn't feel like such a big deal with you , I will love you no matter how far apart we are",
                "You are the most beautiful person I know, inside and out.",
                "You are beautiful just as you are", "You are worthy of love and happiness",
                "You are cherished more than words can say",
                "You are enough in every possible way",
                "You are strong even on the days you feel tired",
                "You are gentle and powerful all at once",
                "You are deeply valued every single day",
                "You are loved beyond measure",
                "You are irreplaceable in my life",
                "You are brave for facing each day with grace",
                "You are radiant, inside and out",
                "You are intelligent and your thoughts matter",
                "You are kind, even when the world isnâ€™t",
                "You are my safe place and my peace",
                "You are supported in everything you dream",
                "You are appreciated for all that you do",
                "You are believed in, even when you doubt",
                "You are admired for your heart and strength",
                "You are understood, even in silence",
                "You are respected fully and always",
                "I just kissed you in my thoughts I hope you felt that.",
                "I'm so incredibly lucky to have you in my life.",
                "Your kindness inspires me every single day.",
                "Just thinking about you makes my day even better.",
                "You are smart, strong, and capable of anything my love.",
                "I love you more than words can say.",
                "Loving you is the greatest blessing of my life",
                "I'll always be here to remind you how extraordinary you are",
                "Even in your quietest moments, you are deeply valued and deeply loved",
                "I won't trade you for anything in the world..you're irreplaceable darling",
                "Your smile is the sunrise that starts my soul anew each day",
                "I find home not in a place, but in the warmt of your embrace.",
                "In your eyes, I see forever.. a love that time can't fade.",
                "Understand how rare you are, realize how beautiful your energy is"

            ];

            const handleNextMessage = () => {
                setMessageIndex((prevIndex) => (prevIndex + 1) % affirmations.length);
            };

            const handleCollectHeart = (id) => {
                if (collectedHearts.includes(id)) return;
                const heartEl = document.getElementById(`heart-${id}`);
                if (heartEl) {
                    heartEl.classList.add('collected-heart');
                }
                setTimeout(() => {
                    setCollectedHearts(prev => [...prev, id]);
                }, 500);
            };

            const handleDateSubmit = (e) => {
                e.preventDefault();

                const templateParams = {
                    date: proposedDate,
                    idea: proposedIdea,
                    to_name: "Alaa",
                    message: `ðŸŒ™ Your queen just sent you a dreamy date idea:\n\nðŸ—“ï¸ When: ${proposedDate}\nðŸ’¡ Idea: ${proposedIdea}\n\nSheâ€™s thinking of you always ðŸ’–`,
                };

                emailjs.send(
                    'service_31ifsv',           // your actual Service ID from EmailJS
                    'template_ucw3o45',          // your actual Template ID from EmailJS
                    templateParams,
                    'QoCQbg9gv8bU5rOfy'          // your actual Public Key (User ID)
                ).then((response) => {
                    console.log('SUCCESS!', response.status, response.text);
                    setDateSubmitted(true);
                }, (error) => {
                    console.log('FAILED...', error);
                });
            };

            const Section = ({ id, title, icon, children }) => (
                <div id={id} className="p-6 md:p-8 rounded-2xl bg-white/50 backdrop-blur-sm shadow-lg fade-in">
                    <h2 className="text-3xl font-bold text-rose-900/80 mb-4 flex items-center">
                        <i className={`fas ${icon} mr-3`}></i>
                        {title}
                    </h2>
                    <div className="space-y-4 text-slate-800 leading-relaxed">
                        {children}
                    </div>
                </div>
            );

            const NavButton = ({ section, icon, label }) => (
                <button onClick={() => setActiveSection(section)} className={`flex flex-col items-center space-y-1 p-2 rounded-lg transition-all duration-300 ${activeSection === section ? 'text-rose-700 scale-110' : 'text-slate-500 hover:text-rose-600 hover:scale-105'}`}>
                    <i className={`fas ${icon} text-2xl`}></i>
                    <span className="text-xs font-medium">{label}</span>
                </button>
            );

            return (
                <div className="min-h-screen bg-rose-50 font-sans">
                    <header className="text-center py-4 bg-rose-50/80 backdrop-blur-sm">
                        <p className="text-sm text-rose-900/70 font-light tracking-widest">
                            24th May 2025 <span className="font-serif mx-2">âˆž</span> Forever
                        </p>
                    </header>
                    <main className="p-4 md:p-8 max-w-4xl mx-auto space-y-8">
                        {activeSection === 'affirmation' && (
                            <Section id="affirmation" title="My Dearest Wife" icon="fa-sun">
                                <p>This is a small corner of the internet I carved out just for you. A place to remind you, on any day, how much you mean to me. You are my sun, my moon, and all my stars. Your laughter is the sweetest music, and your presence is the warmest .</p>
                                <Moon />
                                <p className="text-sm text-center text-slate-500 italic mt-2">You can click and drag the moon to see it from all angles hehehe.</p>
                                <div className="text-center mt-4">
                                    <p className="text-lg font-semibold text-rose-800 mb-3 fade-in">{affirmations[messageIndex]}</p>
                                    <button
                                        onClick={handleNextMessage}
                                        className="px-6 py-2 bg-rose-500 text-white rounded-full shadow-md hover:bg-rose-600 transition-colors duration-300"
                                    >
                                        Another Message
                                    </button>
                                </div>
                            </Section>
                        )}
                        {activeSection === 'letter' && (
                            <Section id="letter" title="A Letter From My Heart" icon="fa-envelope-open-text">
                                <p>Meri Beewi,</p>
                                <p>From the moment I met you, I knew my life was about to change for the better. Every day with you feels like a beautiful dream I never want to wake up from. You walked into my life so effortlessly, and yet youâ€™ve become the most essential part of it like a missing piece of my heart finally finding its place..</p>
                                <p>You bring out the best in me not just in how I act, but in who Iâ€™m becoming. Your smile is the most radiant thing Iâ€™ve ever seen it has the power to quiet my storms and warm every cold corner of my day. Even through a screen, even from miles away, you make me feel deeply loved, seen, and safe..</p>
                                <p>This is just a small corner of the internet carved out just for you so you never forget how much I cherish you, how deeply I love you & how eternally grateful I am for your existence. You are the sunshine of my mornings, the moonlight that softens my nights, and the stardust that makes the space in between feel magical.</p>
                                <p>Even though we met online, what we share is real realer than anything Iâ€™ve ever known. Stronger than distance, deeper than time. I never thought someone I hadnâ€™t even touched could hold my heart so completelyâ€¦ and yet, here you are.And oh God, when you said "I love you" for the first time my brain short-circuited. My soul levitated. My heart got butterflies. Then you sent a voice noteâ€¦ and let me tell you: I replayed that voice note like a possessed woman on a love-struck mission, over and over, telling myself, No way this angel just said she loves ME.</p>
                                <p> You make me feel chosen truly chosen. And that feeling is everything. Thereâ€™s this quote I once heard in a movie you might know it. When you truly want something with all your heart, the entire universe conspires in helping you achieve it.Thatâ€™s what you are to me. A prayer God had answered. A dream that walked in and said, "Hi, Iâ€™m yours". I admire your photos like a fool in love every single day. The way you tilt your head, your eyes, your smileâ€¦ I could write poems about just your selfies. I look at you and thank God daily, because somehow, He gave me you the most beautiful soul Iâ€™ve ever known.You are my blessing, my peace, my love, my nisfi el thani. My treasure. </p>
                                <p>Thank you for loving me. Thank you for being my lady.</p>
                                <p className="text-right">Forever and always,<br />Your meri jaan Alaa ðŸ’‹ </p>
                            </Section>
                        )}
                        {activeSection === 'date' && (
                            <Section id="date" title="Our Next Adventure" icon="fa-calendar-check">
                                <p>Get ready, my love! I've planned a little something for us. A day to disconnect from the world and reconnect with each other. No phones, no distractions, just you and me.</p>
                                <div className="text-center bg-rose-100/70 p-6 rounded-xl border-2 border-dashed border-rose-300/50">
                                    <h3 className="text-2xl font-bold text-rose-800">Our Date Night</h3>
                                    <p className="text-lg mt-2"><strong>When:</strong> This Sunday, 5:00 PM</p>
                                    <p className="mt-1"><strong>Where:</strong> That's the secret !</p>
                                    <p className="mt-4 font-semibold">Dress code: Something that makes you feel beautiful (though you always are).</p>
                                </div>

                                <div className="mt-8 text-center">
                                    <button
                                        onClick={() => setShowPlanForm(!showPlanForm)}
                                        className="px-6 py-3 bg-rose-500 text-white rounded-full shadow-md hover:bg-rose-600 transition-colors duration-300"
                                    >
                                        {showPlanForm ? "Hide Your Date Idea" : "Suggest a Date Idea for Us!"}
                                    </button>

                                    {showPlanForm && (
                                        <form onSubmit={handleDateSubmit} className="mt-6 space-y-4 fade-in">
                                            <p className="text-lg font-semibold text-rose-800">I'd love to hear your ideas!</p>
                                            <div>
                                                <label htmlFor="proposedDate" className="block text-left text-sm font-medium text-slate-700 mb-1">When would you like to go?</label>
                                                <input
                                                    type="date"
                                                    id="proposedDate"
                                                    value={proposedDate}
                                                    onChange={(e) => setProposedDate(e.target.value)}
                                                    className="w-full px-3 py-2 border border-rose-300 rounded-lg focus:ring-rose-500 focus:border-rose-500"
                                                    required
                                                />
                                            </div>
                                            <div>
                                                <label htmlFor="proposedIdea" className="block text-left text-sm font-medium text-slate-700 mb-1">What's your dream date idea?</label>
                                                <textarea
                                                    id="proposedIdea"
                                                    rows="4"
                                                    value={proposedIdea}
                                                    onChange={(e) => setProposedIdea(e.target.value)}
                                                    placeholder="e.g., A picnic under the stars, a cooking class, a weekend getaway..."
                                                    className="w-full px-3 py-2 border border-rose-300 rounded-lg focus:ring-rose-500 focus:border-rose-500"
                                                    required
                                                ></textarea>
                                            </div>
                                            <button
                                                type="submit"
                                                className="px-6 py-2 bg-rose-700 text-white rounded-full shadow-md hover:bg-rose-800 transition-colors duration-300"
                                            >
                                                Send me the date idea queen !!
                                            </button>
                                            {dateSubmitted && (
                                                <p className="mt-4 text-green-700 font-semibold fade-in">Got it, my love! I'll keep your idea in mind! ðŸ˜Š</p>
                                            )}
                                        </form>
                                    )}
                                </div>
                            </Section>
                        )}
                        {activeSection === 'hearts' && (
                            <Section id="hearts" title="Collect My Love" icon="fa-heart">
                                <p>I've scattered some hearts for you. Each one is a little piece of my love. Click on them to collect them!</p>
                                <div className="relative h-64 grid grid-cols-5 gap-2 items-center justify-center">
                                    {[...Array(10).keys()].map(i => { // Changed to 10 hearts
                                        const top = `${20 + Math.random() * 60}%`; // Keep hearts within a reasonable range
                                        const left = `${5 + Math.random() * 90}%`;
                                        const isCollected = collectedHearts.includes(i);
                                        return (
                                            <i
                                                key={i}
                                                id={`heart-${i}`}
                                                onClick={() => handleCollectHeart(i)}
                                                className={`fas fa-heart text-5xl text-red-500 cursor-pointer absolute transition-opacity duration-500 ${isCollected ? 'opacity-0' : 'opacity-100 heart-beat'}`}
                                                style={{ top, left }}
                                            ></i>
                                        );
                                    })}
                                </div>
                                {collectedHearts.length === 10 && ( // Changed check to 10
                                    <p className="text-center font-bold text-xl text-rose-700 mt-4 fade-in">You've collected all my love! â¤ï¸</p>
                                )}
                            </Section>
                        )}
                        {activeSection === 'spotify' && (
                            <Section id="spotify" title="Our Soundtrack" icon="fa-music">
                                <p>Some songs just feel like us. Here's a playlist that reminds me of you, of us, and of our journey together. Press play and let's get lost in the music.</p>
                                <div className="aspect-w-16 aspect-h-9">
                                    <iframe
                                        style={{ borderRadius: '12px' }}
                                        src="https://open.spotify.com/embed/playlist/37i9dQZF1DXcBWIGoYBM5M?utm_source=generator"
                                        width="100%"
                                        height="352"
                                        frameBorder="0"
                                        allowFullScreen=""
                                        allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
                                        loading="lazy"
                                    ></iframe>
                                </div>
                            </Section>
                        )}
                    </main>
                    <nav className="sticky bottom-0 left-0 right-0 mt-8 bg-rose-100/80 backdrop-blur-sm border-t border-rose-200/70">
                        <div className="flex justify-around max-w-lg mx-auto p-2">
                            <NavButton section="affirmation" icon="fa-sun" label="Affirmation" />
                            <NavButton section="letter" icon="fa-envelope-open-text" label="My Letter" />
                            <NavButton section="date" icon="fa-calendar-check" label="Plan Date" />
                            <NavButton section="hearts" icon="fa-heart" label="Collect Hearts" />
                            <NavButton section="spotify" icon="fa-music" label="Our Songs" />
                        </div>
                    </nav>
                </div>
            );
        };

        const EnvelopeAnimationPage = ({ onAnimationEnd }) => {
            useEffect(() => {
                const timer = setTimeout(onAnimationEnd, 3800);
                return () => clearTimeout(timer);
            }, [onAnimationEnd]);

            return (
                <div style={{ backgroundColor: '#F7D6CF' }} className="flex items-center justify-center min-h-screen overflow-hidden">
                    <div className="relative animate-fly-envelope">
                        <i className="fas fa-envelope text-9xl" style={{ color: '#A15C48' }}></i>
                    </div>
                </div>
            );
        };

        const App = () => {
            // State flow: flowerAnimation -> passcode -> envelopeAnimation -> main
            const [appState, setAppState] = useState('flowerAnimation');

            const handleFlowerAnimationEnd = () => setAppState('passcode');
            const handleLoginSuccess = () => setAppState('envelopeAnimation');
            const handleEnvelopeAnimationEnd = () => setAppState('main');

            if (appState === 'flowerAnimation') {
                return <FlowerAnimationPage onAnimationEnd={handleFlowerAnimationEnd} />;
            }
            if (appState === 'passcode') {
                return <PasscodePage onSuccess={handleLoginSuccess} />;
            }
            if (appState === 'envelopeAnimation') {
                return <EnvelopeAnimationPage onAnimationEnd={handleEnvelopeAnimationEnd} />;
            }
            return <MainContentPage />;
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);

    </script>
</body>

</html>
